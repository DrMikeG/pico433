My smart light switch has arrived.

It's made up of two boards, connected by a 2x8 pin header.

The back board appears to be all the high voltage components.

At some point, it must bring the voltage down (I think to 5V) to bring it through the pin header to the front board.

## Back board

### BD1
MB6F + -  Bridge Rectifier
Forward current 500 mA	
Peak Reverse Voltage:	600 V	
Vf - Forward Voltage:	1.1 V	
Max Surge Current:	27.3 A

### D8 
2A, 50V - 600V Surface Mount Super Fast Rectifier

### U4
KP3211S
KP3211BSG family is  a high performance Switch Mode  Power  Supply  Switcher  for  low  power  off-line  application  with  minimum  components  in typical buck solution.

### Relay blok
Z3FF 1A

## Front board

The pin header looks a lot like the one I use to program ESP8266 boards...
Two of the pins as bridged on the back board.

### U1
AMS1117
3.3 H2200
The AMS1117 series of adjustable and fixed voltage regulators
Taking 5V to 3.3V

### Y1
24mhz crystal oscillator 

### T4 (D5)
Diode

### U4
83A04A-3 UAT006F2
Touch I/O Flash MCU
Touch Key Operation
When a finger touches or is in proximity to a touch pad, the capacitance of the pad will increase.
By using this capacitance variation to change slightly the frequency of the internal sense oscillator,
touch actions can be sensed by measuring these frequency changes. Using an internal programmable
divider the reference clock is used to generate a fixed time period. By counting a number of
generated clock cycles from the sense oscillator during this fixed time period touch key actions can
be determined.
The devices contain two or four touch key inputs which are shared with logical I/O pins, with the
desired function selected using register bits. The Touch Key module also has its own interrupt
vectors and set of interrupt flags.
During this reference clock fixed interval, the number of clock cycles generated by the sense
oscillator is measured, and it is this value that is used to determine if a touch action has been made
or not. At the end of the fixed reference clock time interval, a Touch Key interrupt signal will be
generated

### CN1
8 pin header connector 
It's not clear what any of the pins are, but there are breakouts pads for 5V and GND nearby

 [???]     [5V]
 [GND 0ohm][???]
 [GND 0ohm][???]
 [GND 1.2k][???]
 CN1 (for orientation)


### ? Main chip
https://community.home-assistant.io/t/altobeam-altbm6431-iot-chip/233384


AltoBeam 6431
CA22-61

> AltoBeam announced the official release of the new generation IoT Wi-Fi chip with part number ATBM6431, Altobeamâ€™s second-generation IoT Wi-Fi product. ATBM6431 integrates a low-power MCU processor and 2Mbytes Flash memory, it supports built-in IEEE 802.11 b/g/n wireless network protocol stack and TCP/IP protocol stack. ATBM6431 is housed with 5mm*5mm, QFN 40pin package and supports a variety of peripheral interfaces such as UART, I2C, SDIO, USB, SPI, JTAG, PWM, GPIO, and ADC input. Compared with the previous generation, ATBM6431 adds more peripheral interfaces and significantly reduces power consumption as well as sleep power to meet the needs of customers in various different products.



# Pico touch


Without PIO 

https://forum.micropython.org/viewtopic.php?f=5&t=9829




Using PIO
https://forum.micropython.org/viewtopic.php?f=21&t=9833&p=55035#p55035




Pinout from bottom board


[ K1][ K2][ K2][05V]
[GND][GND][GND][05V]

I think when the mosfet is draining, the red led comes on because the current can flow to through it.
This grounds in K2, which I think triggers the back board to activate the relay.

I think this reverses, if you drain K2 sufficiently, the LED will come on.


# Teensy touch

Understand this first... Great documentation.
https://forum.pjrc.com/threads/59307-A-lot-of-confusion-with-the-touch-pins-on-the-Teensy-boards?s=c3861e90a52677df56c1345ea1851da9
https://web.archive.org/web/20180713004819/https://mb-raw.blogspot.com/2018/02/teensy-32-capacitive-touch.html



https://youtu.be/DRD62bHgEUI


To decode the value, take the first two digits, then follow them with the number of zeros indicated by the third digit. 104 becomes "10" followed by "0000," or 100000 pF, more succinctly written as 100 nF.




100 nF.

30 nF.
034